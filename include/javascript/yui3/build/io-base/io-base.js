/*
     YUI 3.15.0 (build 834026e)
     Copyright 2014 Yahoo! Inc. All rights reserved.
     Licensed under the BSD License.
     http://yuilibrary.com/license/
     */
YUI.add('io-base',function(Y,NAME){var
EVENTS=['start','complete','end','success','failure','progress'],XHR_PROPS=['status','statusText','responseText','responseXML'],win=Y.config.win,uid=0;function IO(config){var io=this;io._uid='io:'+uid++;io._init(config);Y.io._map[io._uid]=io;}
IO.prototype={_id:0,_headers:{'X-Requested-With':'XMLHttpRequest'},_timeout:{},_init:function(config){var io=this,i,len;io.cfg=config||{};Y.augment(io,Y.EventTarget);for(i=0,len=EVENTS.length;i<len;++i){io.publish('io:'+EVENTS[i],Y.merge({broadcast:1},config));io.publish('io-trn:'+EVENTS[i],config);}},_create:function(config,id){var io=this,transaction={id:Y.Lang.isNumber(id)?id:io._id++,uid:io._uid},alt=config.xdr?config.xdr.use:null,form=config.form&&config.form.upload?'iframe':null,use;if(alt==='native'){alt=Y.UA.ie&&!SUPPORTS_CORS?'xdr':null;io.setHeader('X-Requested-With');}
use=alt||form;transaction=use?Y.merge(Y.IO.customTransport(use),transaction):Y.merge(Y.IO.defaultTransport(),transaction);if(transaction.notify){config.notify=function(e,t,c){io.notify(e,t,c);};}
if(!use){if(win&&win.FormData&&config.data instanceof win.FormData){transaction.c.upload.onprogress=function(e){io.progress(transaction,e,config);};transaction.c.onload=function(e){io.load(transaction,e,config);};transaction.c.onerror=function(e){io.error(transaction,e,config);};transaction.upload=true;}}
return transaction;},_destroy:function(transaction){if(win&&!transaction.notify&&!transaction.xdr){if(XHR&&!transaction.upload){transaction.c.onreadystatechange=null;}else if(transaction.upload){transaction.c.upload.onprogress=null;transaction.c.onload=null;transaction.c.onerror=null;}else if(Y.UA.ie&&!transaction.e){transaction.c.abort();}}
transaction=transaction.c=null;},_evt:function(eventName,transaction,config){var io=this,params,args=config['arguments'],emitFacade=io.cfg.emitFacade,globalEvent="io:"+eventName,trnEvent="io-trn:"+eventName;this.detach(trnEvent);if(transaction.e){transaction.c={status:0,statusText:transaction.e};}
params=[emitFacade?{id:transaction.id,data:transaction.c,cfg:config,'arguments':args}:transaction.id];if(!emitFacade){if(eventName===EVENTS[0]||eventName===EVENTS[2]){if(args){params.push(args);}}else{if(transaction.evt){params.push(transaction.evt);}else{params.push(transaction.c);}
if(args){params.push(args);}}}
params.unshift(globalEvent);io.fire.apply(io,params);if(config.on){params[0]=trnEvent;io.once(trnEvent,config.on[eventName],config.context||Y);io.fire.apply(io,params);}},start:function(transaction,config){this._evt(EVENTS[0],transaction,config);},complete:function(transaction,config){this._evt(EVENTS[1],transaction,config);},end:function(transaction,config){this._evt(EVENTS[2],transaction,config);this._destroy(transaction);},success:function(transaction,config){this._evt(EVENTS[3],transaction,config);this.end(transaction,config);},failure:function(transaction,config){this._evt(EVENTS[4],transaction,config);this.end(transaction,config);},progress:function(transaction,e,config){transaction.evt=e;this._evt(EVENTS[5],transaction,config);},load:function(transaction,e,config){transaction.evt=e.target;this._evt(EVENTS[1],transaction,config);},error:function(transaction,e,config){transaction.evt=e;this._evt(EVENTS[4],transaction,config);},_retry:function(transaction,uri,config){this._destroy(transaction);config.xdr.use='flash';return this.send(uri,config,transaction.id);},_concat:function(uri,data){uri+=(uri.indexOf('?')===-1?'?':'&')+data;return uri;},setHeader:function(name,value){if(value){this._headers[name]=value;}else{delete this._headers[name];}},_setHeaders:function(transaction,headers){headers=Y.merge(this._headers,headers);Y.Object.each(headers,function(value,name){if(value!=='disable'){transaction.setRequestHeader(name,headers[name]);}});},_startTimeout:function(transaction,timeout){var io=this;io._timeout[transaction.id]=setTimeout(function(){io._abort(transaction,'timeout');},timeout);},_clearTimeout:function(id){clearTimeout(this._timeout[id]);delete this._timeout[id];},_result:function(transaction,config){var status;try{status=transaction.c.status;}catch(e){status=0;}
if(status>=200&&status<300||status===304||status===1223){this.success(transaction,config);}else{this.failure(transaction,config);}},_rS:function(transaction,config){var io=this;if(transaction.c.readyState===4){if(config.timeout){io._clearTimeout(transaction.id);}
setTimeout(function(){io.complete(transaction,config);io._result(transaction,config);},0);}},_abort:function(transaction,type){if(transaction&&transaction.c){transaction.e=type;transaction.c.abort();}},send:function(uri,config,id){var transaction,method,i,len,sync,data,io=this,u=uri,response={};config=config?Y.Object(config):{};transaction=io._create(config,id);method=config.method?config.method.toUpperCase():'GET';sync=config.sync;data=config.data;if((Y.Lang.isObject(data)&&!data.nodeType)&&!transaction.upload){if(Y.QueryString&&Y.QueryString.stringify){config.data=data=Y.QueryString.stringify(data);}else{}}
if(config.form){if(config.form.upload){return io.upload(transaction,uri,config);}else{data=io._serialize(config.form,data);}}
data||(data='');if(data){switch(method){case'GET':case'HEAD':case'DELETE':u=io._concat(u,data);data='';break;case'POST':case'PUT':config.headers=Y.merge({'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'},config.headers);break;}}
if(transaction.xdr){return io.xdr(u,transaction,config);}
else if(transaction.notify){return transaction.c.send(transaction,uri,config);}
if(!sync&&!transaction.upload){transaction.c.onreadystatechange=function(){io._rS(transaction,config);};}
try{transaction.c.open(method,u,!sync,config.username||null,config.password||null);io._setHeaders(transaction.c,config.headers||{});io.start(transaction,config);if(config.xdr&&config.xdr.credentials&&SUPPORTS_CORS){transaction.c.withCredentials=true;}
transaction.c.send(data);if(sync){for(i=0,len=XHR_PROPS.length;i<len;++i){response[XHR_PROPS[i]]=transaction.c[XHR_PROPS[i]];}
response.getAllResponseHeaders=function(){return transaction.c.getAllResponseHeaders();};response.getResponseHeader=function(name){return transaction.c.getResponseHeader(name);};io.complete(transaction,config);io._result(transaction,config);return response;}}catch(e){if(transaction.xdr){return io._retry(transaction,uri,config);}else{io.complete(transaction,config);io._result(transaction,config);}}
if(config.timeout){io._startTimeout(transaction,config.timeout);}
return{id:transaction.id,abort:function(){return transaction.c?io._abort(transaction,'abort'):false;},isInProgress:function(){return transaction.c?(transaction.c.readyState%4):false;},io:io};}};Y.io=function(url,config){var transaction=Y.io._map['io:0']||new IO();return transaction.send.apply(transaction,[url,config]);};Y.io.header=function(name,value){var transaction=Y.io._map['io:0']||new IO();transaction.setHeader(name,value);};Y.IO=IO;Y.io._map={};var XHR=win&&win.XMLHttpRequest,XDR=win&&win.XDomainRequest,AX=win&&win.ActiveXObject,SUPPORTS_CORS=XHR&&'withCredentials'in(new XMLHttpRequest());Y.mix(Y.IO,{_default:'xhr',defaultTransport:function(id){if(id){Y.IO._default=id;}else{var o={c:Y.IO.transports[Y.IO._default](),notify:Y.IO._default==='xhr'?false:true};return o;}},transports:{xhr:function(){return XHR?new XMLHttpRequest():AX?new ActiveXObject('Microsoft.XMLHTTP'):null;},xdr:function(){return XDR?new XDomainRequest():null;},iframe:function(){return{};},flash:null,nodejs:null},customTransport:function(id){var o={c:Y.IO.transports[id]()};o[(id==='xdr'||id==='flash')?'xdr':'notify']=true;return o;}});Y.mix(Y.IO.prototype,{notify:function(event,transaction,config){var io=this;switch(event){case'timeout':case'abort':case'transport error':transaction.c={status:0,statusText:event};event='failure';default:io[event].apply(io,[transaction,config]);}}});},'3.15.0',{"requires":["event-custom-base","querystring-stringify-simple"]});